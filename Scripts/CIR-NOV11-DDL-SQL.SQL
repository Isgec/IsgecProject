/**************************1-nov-2011 Laxman********************/
CREATE TABLE CIR_RACE_MAST
(RACE_CODE      VARCHAR(10)    NOT NULL,
 RACE_DESC      VARCHAR(30)    NOT NULL,
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATETIME DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT CIR_RACE_MAST_PK PRIMARY KEY(RACE_CODE));

ALTER TABLE CIR_AGMAST ADD AGEING_TYPE VARCHAR(1), LABEL_TYPE VARCHAR(1) DEFAULT 'I',
H_ADDR1               VARCHAR(50),H_ADDR2            VARCHAR(50),H_ADDR3     VARCHAR(50),
H_CITY_CODE           VARCHAR(8), H_TEHSIL_TALUKA    VARCHAR(8),H_DIST_CODE  VARCHAR(8),
H_STATE_CODE          VARCHAR(8),H_COUNTRY_CODE      VARCHAR(8),H_PIN_CODE   VARCHAR(8),
H_PHONE_NO1          VARCHAR(25),H_PHONE_NO2         VARCHAR(25),
H_MOBILE_NO1          NUMERIC(10), H_MOBILE_NO2        NUMERIC(10),H_EMAIL_ID    VARCHAR(50);

ALTER TABLE CIR_AGMAST_DIS ADD AGEING_TYPE VARCHAR(1), LABEL_TYPE VARCHAR(1) DEFAULT 'I',
H_ADDR1               VARCHAR(50),H_ADDR2            VARCHAR(50),H_ADDR3     VARCHAR(50),
H_CITY_CODE           VARCHAR(8), H_TEHSIL_TALUKA    VARCHAR(8),H_DIST_CODE  VARCHAR(8),
H_STATE_CODE          VARCHAR(8),H_COUNTRY_CODE      VARCHAR(8),H_PIN_CODE   VARCHAR(8),
H_PHONE_NO1          VARCHAR(25),H_PHONE_NO2       VARCHAR(25),
H_MOBILE_NO1          NUMERIC(10), H_MOBILE_NO2        NUMERIC(10),H_EMAIL_ID    VARCHAR(50)

ALTER TABLE CIR_AG_CON_PER ADD RACE_CODE    VARCHAR(20),NEW_IC_NO VARCHAR(20),OLD_IC_NO VARCHAR(20);
ALTER TABLE CIR_AG_CON_PER_DIS ADD RACE_CODE    VARCHAR(20),NEW_IC_NO VARCHAR(20),OLD_IC_NO VARCHAR(20);
ALTER TABLE CIR_SUPPLY ADD BILLING_CYCLE    VARCHAR(1) DEFAULT 'M',INSERTION_FEE VARCHAR(1) DEFAULT 'N';
ALTER TABLE CIR_SUPPLY_DIS ADD BILLING_CYCLE    VARCHAR(1) DEFAULT 'M',INSERTION_FEE VARCHAR(1) DEFAULT 'N';
ALTER TABLE CIR_TRANSPORTER_MAST ADD PINCODE INT,PHONE_NO2 VARCHAR(20),FAX_NO1    VARCHAR(20),FAX_NO2    VARCHAR(20),
 NEW_IC_NO VARCHAR(20),OLD_IC_NO VARCHAR(20);
ALTER TABLE CIR_EXECUTIVE_MAST ADD DEPT_NAME   VARCHAR(30);

CREATE TABLE CIR_BANK_GUARANTEE
(COMP_CODE      VARCHAR(8)     NOT NULL,
 UNIT_CODE      VARCHAR(8)     NOT NULL,
 AGCD           VARCHAR(8)     NOT NULL,
 DPCD           VARCHAR(8)     NOT NULL,
 BG_NO          NUMERIC(8)       NOT NULL,
 BG_AMT         NUMERIC(12,2)    ,
 BG_DATE        DATETIME            NOT NULL,
 BG_VALID       DATETIME            NOT NULL,
 BANK_DESC      VARCHAR(50)    NOT NULL,
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATE DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATE,
 BKUP_SNO       NUMERIC(30)	NOT NULL IDENTITY (1, 1),
 BG_TYPE 		VARCHAR(2) DEFAULT 'BG',
 CONSTRAINT CIR_BANK_GUARANTEE_PK PRIMARY KEY(COMP_CODE,UNIT_CODE,AGCD,DPCD,BG_NO),
 CONSTRAINT CIR_BANK_GUARANTEE_UK UNIQUE (BKUP_SNO),
 CONSTRAINT CIR_BANK_GUARANTEE_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
 REFERENCES CIR_AGMAST (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE);
 
CREATE TABLE CIR_BANK_GUARANTEE_DIS
(COMP_CODE      VARCHAR(8)     NOT NULL,
 UNIT_CODE      VARCHAR(8)     NOT NULL,
 AGCD           VARCHAR(8)     NOT NULL,
 DPCD           VARCHAR(8)     NOT NULL,
 BG_NO          NUMERIC(8)       NOT NULL,
 BG_AMT         NUMERIC(12,2)    ,
 BG_DATE        DATETIME            NOT NULL,
 BG_VALID       DATETIME            NOT NULL,
 BANK_DESC      VARCHAR(50)    NOT NULL,
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATE DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATE,
 BKUP_SNO       NUMERIC(30)	NOT NULL IDENTITY (1, 1),
 BG_TYPE 		VARCHAR(2) DEFAULT 'BG',
 CONSTRAINT CIR_BANK_GUARANTEE_DIS_PK PRIMARY KEY(COMP_CODE,UNIT_CODE,AGCD,DPCD,BG_NO),
 CONSTRAINT CIR_BANK_GUARANTEE_DIS_UK UNIQUE (BKUP_SNO),
 CONSTRAINT CIR_BANK_GUARANTEE_DIS_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
 REFERENCES CIR_AGMAST_DIS (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE);
 
CREATE TABLE CIR_OVERDUE_MAST
(COMP_CODE      VARCHAR(8)     NOT NULL,
 BILL_CYCLE     VARCHAR(1)     NOT NULL,
 PUBL_CODE      VARCHAR(8)     NOT NULL,
 CREDIT_DAYS    NUMERIC(8)       NOT NULL,
 CREDIT_LIMIT   NUMERIC(12)      NOT NULL,
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 BKUP_SNO       NUMERIC(30) NOT NULL IDENTITY (1, 1),
 CONSTRAINT CIR_OVERDUE_MAST_PK PRIMARY KEY(COMP_CODE,BILL_CYCLE,PUBL_CODE),
 CONSTRAINT CIR_OVERDUE_MAST_UK UNIQUE (BKUP_SNO));
CREATE TABLE CIR_AGEING_SLAB_MAST
(COMP_CODE          VARCHAR(8) NOT NULL,
 AGEING_TYPE        VARCHAR(1)     DEFAULT 'M',
 PRO_TYPE           VARCHAR(10) NOT NULL,
 SLAB_FROM1         NUMERIC(5)   NOT NULL,
 SLAB_TILL1         NUMERIC(5)   NOT NULL,
 SLAB_FROM2         NUMERIC(5)   NOT NULL,
 SLAB_TILL2         NUMERIC(5)   NOT NULL, 
 SLAB_FROM3         NUMERIC(5)   NOT NULL,
 SLAB_TILL3         NUMERIC(5)   NOT NULL,
 SLAB_FROM4         NUMERIC(5)   NOT NULL,
 SLAB_TILL4         NUMERIC(5)   NOT NULL,
 SLAB_FROM5         NUMERIC(5)   NOT NULL,
 SLAB_TILL5         NUMERIC(5)   NOT NULL,
 SLAB_FROM6         NUMERIC(5)   NOT NULL,
 SLAB_TILL6         NUMERIC(5)   NOT NULL, 
 CREATED_BY         VARCHAR(30),
 CREATED_DT         DATETIME        DEFAULT GETDATE(),
 UPDATED_BY         VARCHAR(30),
 UPDATED_DT         DATETIME,
 CONSTRAINT CIR_AGEING_SLAB_MAST_PK PRIMARY KEY(COMP_CODE,AGEING_TYPE, PRO_TYPE));
CREATE TABLE CIR_SELECT_TABLE_COL
( TABLE_SEQ_NO  INT,
  TABLE_NAME    VARCHAR(100),
  COL           VARCHAR(100),
  COL_DES       VARCHAR(200),
  FLAG          VARCHAR(1)                DEFAULT 'Y',
  ORDER_SEQ_NO  INT)
  
CREATE TABLE CIR_SELECT_TABLE_FILTER
( TABLE_SEQ_NO  INT                       NOT NULL,
  TABLE_NAME    VARCHAR(100)              NOT NULL,
  COL           VARCHAR(100)              NOT NULL,
  COL_DES       VARCHAR(200)              NOT NULL,
  FLAG          VARCHAR(1)                DEFAULT 'Y'   NOT NULL,
  DATA_TYPE     VARCHAR(100)              NOT NULL,
  ORDER_SEQ_NO  INT                       NOT NULL,
  CONSTRAINT CIR_SELECT_TABLE_FILTER_PK PRIMARY KEY (TABLE_SEQ_NO, TABLE_NAME, COL))
  
CREATE TABLE CIR_SERIES
( COMP_CODE    VARCHAR(8)     NOT NULL,
UNIT_CODE    VARCHAR(8),
BRANCH_CODE  VARCHAR(8),
TY           VARCHAR(8)       NOT NULL,
YEAR_MONID   DATETIME         NOT NULL,
PREFIX       VARCHAR(15)      NOT NULL,
CURR_NO      NUMERIC(10)      NOT NULL);

CREATE TABLE cir_SELECT_TABLE
(TABLE_NAME    VARCHAR(100),
  TABLE_DESC    VARCHAR(200),
  FLAG          VARCHAR(1)    DEFAULT 'Y',
  SEQ_NO        INT            NOT NULL,
  ORDER_SEQ_NO  INT,
  CONSTRAINT cir_SELECT_TABLE_PK PRIMARY KEY (SEQ_NO));


ALTER TABLE CIR_AGMAST ADD SUPPLY_SUBAGENCY VARCHAR(1) DEFAULT 'N';

ALTER TABLE CIR_AGMAST_DIS ADD SUPPLY_SUBAGENCY VARCHAR(1) DEFAULT 'N';
ALTER TABLE CIR_EDTN_MAST ADD DIS_AGCD  VARCHAR(8),DIS_DPCD  VARCHAR(8);
ALTER TABLE CIR_EDTN_MAST ADD REG_NO  VARCHAR(20);
ALTER TABLE PREFERRENCES ADD CIR_DIS_AUTO_POSTING VARCHAR(1) DEFAULT 'N';

ALTER TABLE CIR_ROUTE_TAXI_MAST ALTER COLUMN ACT_DIST NUMERIC(5);

ALTER TABLE CIR_TRANSPORTER_MAST alter column PHONE_NO NUMERIC(12);
ALTER TABLE CIR_TRANSPORTER_MAST alter column PHONE_NO NUMERIC(12);
ALTER TABLE CIR_TRANSPORTER_MAST alter column MOBILE_NO NUMERIC(12);
ALTER TABLE CIR_TRANSPORTER_MAST alter column PHONE_NO2 NUMERIC(12);

ALTER TABLE CIR_UNSOLD_RETURN_CONTROL ADD
UNIT_CODE VARCHAR(20),BRANCH_CODE VARCHAR(20),REG_CODE VARCHAR(20),EDTN_CODE   VARCHAR(20),PERM_PER INT
ALTER TABLE CIR_EXPENSES_DETAIL ADD PUBL_CODE       VARCHAR(3),EDTN_CODE   VARCHAR(3),SUPPLY_TYPE VARCHAR(4);
ALTER TABLE CIR_EXPENSES_DETAIL ADD 
CONSTRAINT CIR_EXPENSES_DETAIL_UK UNIQUE (COMP_CODE, UNIT, AGCD, DPCD, EXP_TYPE_CODE,PUBL_CODE,EDTN_CODE,SUPPLY_TYPE);
/************************2-nov-2011 Laxman ***********************/
ALTER TABLE RETAIN_COMM_SLAB ADD COMM_TARGET_ID NUMERIC(10)

CREATE TABLE RETAIN_COMM_TARGET
(COMP_CODE      VARCHAR(8) NOT NULL,
 RETAIN_CODE    VARCHAR(8) NOT NULL,
 TEAM_CODE      VARCHAR(8),
 ADCTG_CODE     VARCHAR(8),
 FROM_TGT       NUMERIC(5,2),
 TO_TGT         NUMERIC(5,2),
 CUST_TYPE      VARCHAR(10),
 AD_TYPE        VARCHAR(8),
 PUB_TYPE       VARCHAR(8),
 PUBL_CODE      VARCHAR(200),
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 COMM_TARGET_ID NUMERIC(10) NOT NULL,
 CONSTRAINT RETAIN_COMM_TARGET_PK PRIMARY KEY (COMP_CODE, RETAIN_CODE,COMM_TARGET_ID))

CREATE TABLE RETAIN_ADCOMM_TARGET
(COMP_CODE      VARCHAR(8) NOT NULL,
 RETAIN_CODE    VARCHAR(8) NOT NULL,
 COMM_TARGET_ID NUMERIC(10)  NOT NULL,
 PUBL_CODE      VARCHAR(200),
 NO_OF_PUBL     NUMERIC(3),
 ADCOMM_PER     NUMERIC(12,2),
 COMM_TYPE      VARCHAR(1) DEFAULT 'P',
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT RETAIN_ADCOMM_TARGET_PK PRIMARY KEY (COMP_CODE, RETAIN_CODE,COMM_TARGET_ID))

/********************************4-Nov-2011 Laxman***********************************/
CREATE TABLE CIR_AGENCY_REMARK
(COMP_CODE      VARCHAR(8)     NOT NULL,
 UNIT_CODE      VARCHAR(8)     NOT NULL,
 AGCD           VARCHAR(8)     NOT NULL,
 DPCD           VARCHAR(8)     NOT NULL,
 RMRK_TYPE      VARCHAR(1)     NOT NULL,
 EFFECTIVE_FROM DATETIME       NOT NULL,
 RMRK           VARCHAR(100)   NOT NULL,
 CREATE_BY      VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT CIR_AGENCY_REMARK_PK PRIMARY KEY (COMP_CODE, UNIT_CODE,AGCD,DPCD,RMRK_TYPE,EFFECTIVE_FROM))
 
 CREATE TABLE CIR_AGENCY_REMARK_DIS
(COMP_CODE      VARCHAR(8)     NOT NULL,
 UNIT_CODE      VARCHAR(8)     NOT NULL,
 AGCD           VARCHAR(8)     NOT NULL,
 DPCD           VARCHAR(8)     NOT NULL,
 RMRK_TYPE      VARCHAR(1)     NOT NULL,
 EFFECTIVE_FROM DATETIME       NOT NULL,
 RMRK           VARCHAR(100)   NOT NULL,
 CREATE_BY      VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT CIR_AGENCY_REMARK_DIS_PK PRIMARY KEY (COMP_CODE, UNIT_CODE,AGCD,DPCD,RMRK_TYPE,EFFECTIVE_FROM))
 
 CREATE TABLE CIR_AGENCY_CREDIT
(COMP_CODE      VARCHAR(8)     NOT NULL,
 UNIT_CODE      VARCHAR(8)     NOT NULL,
 AGCD           VARCHAR(8)     NOT NULL,
 DPCD           VARCHAR(8)     NOT NULL,
 PUBL_CODE      VARCHAR(5)     NOT NULL,
 CREDIT_DAYS    NUMERIC(7)     NOT NULL,
 CREDIT_LIMIT   NUMERIC(12)    NOT NULL,
 CREATE_BY      VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT CIR_AGENCY_CREDIT_PK PRIMARY KEY (COMP_CODE, UNIT_CODE,AGCD,DPCD,PUBL_CODE,CREDIT_DAYS,CREDIT_LIMIT));
 
CREATE TABLE CIR_AGENCY_CREDIT_DIS
(COMP_CODE      VARCHAR(8)     NOT NULL,
 UNIT_CODE      VARCHAR(8)     NOT NULL,
 AGCD           VARCHAR(8)     NOT NULL,
 DPCD           VARCHAR(8)     NOT NULL,
 PUBL_CODE      VARCHAR(5)     NOT NULL,
 CREDIT_DAYS    NUMERIC(7)     NOT NULL,
 CREDIT_LIMIT   NUMERIC(12)    NOT NULL,
 CREATE_BY      VARCHAR(30),
 CREATED_DT     DATETIME        DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT CIR_AGENCY_CREDIT_DIS_PK PRIMARY KEY (COMP_CODE, UNIT_CODE,AGCD,DPCD,PUBL_CODE,CREDIT_DAYS,CREDIT_LIMIT));
/********************7_nov-2011 Laxman********************/
CREATE TABLE CIR_FESTIVAL_MAST
(FEST_CODE      NUMERIC(5)	NOT NULL,
 FEST_NAME      VARCHAR(50)	NOT NULL,
 CREATED_BY     VARCHAR(30),
 CREATED_DT     DATETIME DEFAULT GETDATE(),
 UPDATED_BY     VARCHAR(30),
 UPDATED_DT     DATETIME,
 CONSTRAINT CIR_FESTIVAL_MAST_PK PRIMARY KEY (FEST_CODE));
 
 CREATE TABLE CIR_AGENCY_FESTIVAL
( COMP_CODE       VARCHAR(8)       NOT NULL,
  UNIT_CODE       VARCHAR(8)       NOT NULL,
  AGCD            VARCHAR(8)       NOT NULL,
  DPCD            VARCHAR(8)       NOT NULL,
  FEST_CODE       NUMERIC(5)       NOT NULL,
  CREATE_BY       VARCHAR(30),
  CREATED_DT      DATETIME           DEFAULT GETDATE(),
  UPDATED_BY      VARCHAR(30),
  UPDATED_DT      DATETIME,
  CONSTRAINT CIR_AGENCY_FESTIVAL_PK PRIMARY KEY(COMP_CODE, UNIT_CODE, AGCD, DPCD,FEST_CODE),
  CONSTRAINT CIR_AGENCY_FESTIVAL_FK FOREIGN KEY (FEST_CODE) 
  REFERENCES CIR_FESTIVAL_MAST (FEST_CODE) ON DELETE CASCADE);

CREATE TABLE CIR_AGENCY_FESTIVAL_DIS
( COMP_CODE       VARCHAR(8)       NOT NULL,
  UNIT_CODE       VARCHAR(8)       NOT NULL,
  AGCD            VARCHAR(8)       NOT NULL,
  DPCD            VARCHAR(8)       NOT NULL,
  FEST_CODE       NUMERIC(5)       NOT NULL,
  CREATE_BY       VARCHAR(30),
  CREATED_DT      DATETIME           DEFAULT GETDATE(),
  UPDATED_BY      VARCHAR(30),
  UPDATED_DT      DATETIME,
  CONSTRAINT CIR_AGENCY_FESTIVAL_DIS_PK PRIMARY KEY(COMP_CODE, UNIT_CODE, AGCD, DPCD,FEST_CODE),
  CONSTRAINT CIR_AGENCY_FESTIVAL_DIS_FK FOREIGN KEY (FEST_CODE) 
  REFERENCES CIR_FESTIVAL_MAST (FEST_CODE) ON DELETE CASCADE);  
  
ALTER TABLE CIR_AGENCY_REMARK ADD CONSTRAINT CIR_AGENCY_REMARK_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
REFERENCES CIR_AGMAST (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE;

ALTER TABLE CIR_AGENCY_REMARK_DIS ADD CONSTRAINT CIR_AGENCY_REMARK_DIS_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
REFERENCES CIR_AGMAST_DIS (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE;

ALTER TABLE CIR_AGENCY_CREDIT ADD CONSTRAINT CIR_AGENCY_CREDIT_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
REFERENCES CIR_AGMAST (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE;

ALTER TABLE CIR_AGENCY_CREDIT_DIS ADD CONSTRAINT CIR_AGENCY_CREDIT_DIS_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
REFERENCES CIR_AGMAST_DIS (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE;

ALTER TABLE CIR_AGENCY_PAYMODE ADD CONSTRAINT CIR_AGENCY_PAYMODE_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
REFERENCES CIR_AGMAST (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE;

CREATE TABLE CIR_AGENCY_PAYMODE
( COMP_CODE       VARCHAR(8)	NOT NULL,
  UNIT_CODE       VARCHAR(8)	NOT NULL,
  AGCD            VARCHAR(8)	NOT NULL,
  DPCD            VARCHAR(8)	NOT NULL,
  PAYMODE         VARCHAR(8)	NOT NULL,
  PAYMODE_ACTIVE  VARCHAR(1)    DEFAULT 'Y',
  CREATED_BY      VARCHAR(30),
  CREATED_DT      DATETIME      DEFAULT GETDATE(),
  UPDATED_BY      VARCHAR(30),
  UPDATED_DT      DATETIME,
  BKUP_SNO        NUMERIC(30),
  CONSTRAINT CIR_AGENCY_PAYMODE_PK PRIMARY KEY (COMP_CODE, UNIT_CODE, AGCD, DPCD, PAYMODE));
CREATE TABLE CIR_AGENCY_PAYMODE_DIS
( COMP_CODE       VARCHAR(8)	NOT NULL,
  UNIT_CODE       VARCHAR(8)	NOT NULL,
  AGCD            VARCHAR(8)	NOT NULL,
  DPCD            VARCHAR(8)	NOT NULL,
  PAYMODE         VARCHAR(8)	NOT NULL,
  PAYMODE_ACTIVE  VARCHAR(1)    DEFAULT 'Y',
  CREATED_BY      VARCHAR(30),
  CREATED_DT      DATETIME      DEFAULT GETDATE(),
  UPDATED_BY      VARCHAR(30),
  UPDATED_DT      DATETIME,
  BKUP_SNO        NUMERIC(30),
  CONSTRAINT CIR_AGENCY_PAYMODE_DIS_PK PRIMARY KEY (COMP_CODE, UNIT_CODE, AGCD, DPCD, PAYMODE));

ALTER TABLE CIR_AGENCY_PAYMODE_DIS ADD CONSTRAINT CIR_AGENCY_PAYMODE_DIS_FK FOREIGN KEY (COMP_CODE,UNIT_CODE,AGCD,DPCD) 
REFERENCES CIR_AGMAST_DIS (COMP_CODE,UNIT,AGCD,DPCD) ON DELETE CASCADE;

/**********************/

/****************************7-Nov_2011 Laxman*************************/
ALTER TABLE CIR_TAXI_ROUTE ADD DROP_POINT_SEQNO NUMERIC(5);
ALTER TABLE CIR_TAXI_ROUTE DROP COLUMN LATITUDE;
ALTER TABLE CIR_TAXI_ROUTE DROP COLUMN LOGNITUDE;
/****************************7-Nov_2011 Laxman*************************/
/******************8-NOV-2011 Laxman *********************/
ALTER TABLE CIR_EXPENSES_DETAIL ADD CN_THROUGH VARCHAR(1) DEFAULT 'D', VALID_DAYS NUMERIC(5);
  CREATE TABLE CIR_INCT_SLAB_HDR
( COMP_CODE     VARCHAR(8)                NOT NULL,
  INCT_SLAB_ID  NUMERIC(8)                NOT NULL,
  INCT_BASE     VARCHAR(1)                NOT NULL,
  INCT_TYPE     VARCHAR(5)                NOT NULL,
  UNIT_CODE     VARCHAR(8)                NOT NULL,
  BRANCH_CODE   VARCHAR(8),
  PUBL_CODE     VARCHAR(8)                NOT NULL,
  AGENCY_TYPE   VARCHAR(8)                NOT NULL,
  CALC_TYPE     VARCHAR(1)                DEFAULT 'C',
  REASON        VARCHAR(8)                NOT NULL,
  EFF_DATE      DATETIME                  NOT NULL,
  CREATED_BY    VARCHAR(30),
  CREATED_DT    DATETIME                  DEFAULT GETDATE(),
  UPDATED_BY    VARCHAR(30),
  UPDATED_DT    DATETIME,
  CONSTRAINT CIR_INCT_SLAB_HDR_PK PRIMARY KEY (COMP_CODE,INCT_SLAB_ID))
 
CREATE TABLE CIR_INCT_SLAB_DET
( COMP_CODE        VARCHAR(8)             NOT NULL,
  INCT_SLAB_ID     NUMERIC(8)              NOT NULL,
  INCT_BASE        VARCHAR(1)             NOT NULL,
  INCT_TYPE        VARCHAR(5)             NOT NULL,
  UNIT_CODE        VARCHAR(8)             NOT NULL,
  BRANCH_CODE      VARCHAR(8),
  PUBL_CODE        VARCHAR(8)             NOT NULL,
  AGENCY_TYPE      VARCHAR(8)             NOT NULL,
  CALC_TYPE        VARCHAR(1)             DEFAULT 'C',
  REASON           VARCHAR(8)             NOT NULL,
  EFF_DATE         DATETIME               NOT NULL,
  EDTN_CODE        VARCHAR(8)             NOT NULL,
  SUPPLY_TYPE      VARCHAR(8)             NOT NULL,
  SUPPLY_FROM      NUMERIC(10)            NOT NULL,
  SUPPLY_TILL      NUMERIC(10)            NOT NULL,
  INCT_AMT         NUMERIC(12,2)          NOT NULL,
  CREATED_BY       VARCHAR(30),
  CREATED_DT       DATETIME     DEFAULT GETDATE(),
  UPDATED_BY       VARCHAR(30),
  UPDATED_DT       DATETIME,
  INCT_SLABID_DET  NUMERIC(10)            NOT NULL IDENTITY (1, 1),
  CONSTRAINT CIR_INCT_SLAB_DET_PK PRIMARY KEY (COMP_CODE, INCT_SLABID_DET),
  CONSTRAINT CIR_INCT_SLAB_DET_FK FOREIGN KEY (COMP_CODE, INCT_SLAB_ID) 
  REFERENCES CIR_INCT_SLAB_HDR (COMP_CODE,INCT_SLAB_ID)ON DELETE CASCADE);
/******************8-NOV-2011 Laxman *********************/

ALTER TABLE CIR_EXPENSES_DETAIL ADD CN_THROUGH VARCHAR(1) DEFAULT 'D', VALID_DAYS NUMERIC(5)
ALTER TABLE CIR_EXPENSES_DETAIL_DIS ADD CN_THROUGH VARCHAR(1) DEFAULT 'D', VALID_DAYS NUMERIC(5)

ALTER TABLE CIR_INSTALLMENT_MAST ADD PRO_TYPE VARCHAR(1),INST_ENDDT DATETIME,INST_STATUS VARCHAR(1) DEFAULT 'N',OVER_DUE_DAYS NUMERIC(5),RMRK VARCHAR(100)
ALTER TABLE CIR_INSTALLMENT_MAST ADD CONSTRAINT CIR_INSTALLMENT_MAST_PK PRIMARY KEY (COMP_CODE,INST_CODE)

CREATE TABLE PROCESS_SCHEDULE_MAST
(SCHEDULE_NAME      VARCHAR(100)   NOT NULL,
 TASK_FREQ          VARCHAR(1)     DEFAULT 'D',
 START_TIME         VARCHAR(5)     NOT NULL,
 JAN_SUN            VARCHAR(1)     DEFAULT 'N',
 FEB_MON            VARCHAR(1)     DEFAULT 'N',     
 MAR_TUE            VARCHAR(1)     DEFAULT 'N',
 APR_WED            VARCHAR(1)     DEFAULT 'N',
 MAY_THU            VARCHAR(1)     DEFAULT 'N',
 JUN_FRI            VARCHAR(1)     DEFAULT 'N',
 JUL_SAT            VARCHAR(1)     DEFAULT 'N',
 AUG_FLAG           VARCHAR(1)     DEFAULT 'N',
 SEP_FLAG           VARCHAR(1)     DEFAULT 'N',
 OCT_FLAG           VARCHAR(1)     DEFAULT 'N',
 NOV_FLAG           VARCHAR(1)     DEFAULT 'N',
 DEC_FLAG           VARCHAR(1)     DEFAULT 'N',
 MONTH_OF_DAY       NUMERIC(2)     DEFAULT 1,
 CREATED_BY         VARCHAR(30),
 CREATED_DT         DATETIME DEFAULT GETDATE(),
 UPDATED_BY         VARCHAR(30),
 UPDATED_DT         DATETIME,
 CONSTRAINT PROCESS_SCHEDULE_MAST_PK PRIMARY KEY (SCHEDULE_NAME)) ; 
 
 CREATE TABLE CIR_INSTALLMENT_DET
 (COMP_CODE      VARCHAR(10)   NOT NULL,
  UNIT_CODE      VARCHAR(10)   NOT NULL,
  INST_CODE      VARCHAR(10)   NOT NULL,
  AGCD           VARCHAR(10)   NOT NULL,
  DPCD           VARCHAR(10)   NOT NULL,
  INST_NO        NUMERIC(5)    DEFAULT 1,
  INST_DUEDT     DATETIME      NOT NULL,   
  INST_AMT       NUMERIC(15,2) NOT NULL,
  INST_CHQNO     VARCHAR(30),
  INST_CHQDT     DATETIME,
  INST_CHQAMT    NUMERIC(15,2),
  INST_ENDDT     DATETIME,
  INST_STATUS    VARCHAR(1),      
  CREATED_BY     VARCHAR(30),
  CREATED_DT     DATETIME           DEFAULT GETDATE(),
  UPDATED_BY     VARCHAR(30),
  UPDATED_DT     DATETIME,
  CONSTRAINT CIR_INSTALLMENT_DET_PK PRIMARY KEY (COMP_CODE,INST_CODE,INST_NO),
  CONSTRAINT CIR_INSTALLMENT_MAST_FK FOREIGN KEY (COMP_CODE,INST_CODE) 
  REFERENCES CIR_INSTALLMENT_MAST (COMP_CODE,INST_CODE) ON DELETE CASCADE);
/***************************9-NOV-2011 LAXMAN********************/
ALTER TABLE CIR_EXPENSES_TYPE_MAST ADD EXP_REASON  VARCHAR(200);
 ALTER TABLE CIR_EXPENSES_TYPE_MAST ADD CONSTRAINT DF_CIR_EXPENSES_TYPE_MAST_EXP_TYPE_MODE DEFAULT ('M') FOR EXP_TYPE_MODE

ALTER TABLE USERPERMISSION ADD PERMISSION_DESC VARCHAR(100) ,CREATED_BY VARCHAR(30),CREATED_DT DATETIME DEFAULT GETDATE()
ALTER TABLE USERPERMISSION ADD CONSTRAINT USERPERMISSION_UK UNIQUE(USERID,PERMISSION_DESC);
CREATE TABLE USERPERMISSION_DETAIL
(PERMISSION_DESC    VARCHAR(100)   NOT NULL,
 FROM_OS_BAL        NUMERIC(15),
 TILL_OS_BAL        NUMERIC(15),
 NO_OF_TIMES        NUMERIC(5),
 PERIOD_FREQ        VARCHAR(1) DEFAULT 'M',
 ALLOW_FLAG         VARCHAR(1) DEFAULT 'Y',
 CREATED_BY         VARCHAR(30),
 CREATED_DT         DATETIME DEFAULT GETDATE(),
 CONSTRAINT USERPERMISSION_DETAIL_PK PRIMARY KEY(USERID,PERMISSION_DESC),
 CONSTRAINT USERPERMISSION_FK FOREIGN KEY (USERID,PERMISSION_DESC) 
 REFERENCES USERPERMISSION (USERID,PERMISSION_DESC)ON DELETE CASCADE);
/**********************11-nov-2011***********************/
ALTER TABLE CIR_REASON_MST ADD DOC_TYPE VARCHAR(3),CHQ_RETURN_FLAG VARCHAR(1) DEFAULT 'N',NO_OF_TIMES  NUMERIC(5),VALID_DAYS NUMERIC(5)

  CREATE TABLE CIR_INST_BILL_DET
( COMP_CODE         VARCHAR(10)                NOT NULL,
  UNIT_CODE         VARCHAR(10)                NOT NULL,
  INST_CODE         VARCHAR(10)                NOT NULL,
  AGCD              VARCHAR(10)                NOT NULL,
  DPCD              VARCHAR(10)                NOT NULL,
  INST_NO           NUMERIC(5)                   DEFAULT 1,
  INST_BILLNO       VARCHAR(30),
  INST_BILLDT       DATETIME,
  INST_DUE_AMT      NUMERIC(15,2),
  PUBL_CODE         VARCHAR(10),
  CREATED_BY        VARCHAR(30),
  CREATED_DT        DATETIME                        DEFAULT GETDATE(),
  UPDATED_BY        VARCHAR(30),
  UPDATED_DT        DATETIME,
  CONSTRAINT CIR_INST_BILL_DET_PK PRIMARY KEY (COMP_CODE, INST_CODE, INST_NO,INST_BILLNO),
  CONSTRAINT CIR_INST_BILL_DET_FK FOREIGN KEY (COMP_CODE, INST_CODE,INST_NO) 
  REFERENCES CIR_INSTALLMENT_DET (COMP_CODE,INST_CODE,INST_NO) ON DELETE CASCADE);

  ALTER TABLE CIR_OUTMAST ADD DISPUTE_FLAG    VARCHAR(1),DISPUTE_USER_CODE  VARCHAR(30),DISPUTE_DT  DATETIME,DISPUTE_RMRK    VARCHAR(100)
  ALTER TABLE CIR_OUTMAST_TEMP ADD DISPUTE_FLAG    VARCHAR(1),DISPUTE_USER_CODE  VARCHAR(30),DISPUTE_DT  DATETIME,DISPUTE_RMRK    VARCHAR(100)
  ALTER TABLE CIR_OUTMAST_DIS_TEMP ADD DISPUTE_FLAG    VARCHAR(1),DISPUTE_USER_CODE  VARCHAR(30),DISPUTE_DT  DATETIME,DISPUTE_RMRK    VARCHAR(100)
  ALTER TABLE CIR_OUTMAST_DIS ADD DISPUTE_FLAG    VARCHAR(1),DISPUTE_USER_CODE  VARCHAR(30),DISPUTE_DT  DATETIME,DISPUTE_RMRK    VARCHAR(100)
/************************14-NOV-2011************************/
CREATE TABLE CIR_PROCESS_ID
(PROCESS_ID       NUMERIC(30) NOT NULL)


/*****************************15-nov-2011********************************/
  CREATE TABLE CIR_LATE_FEE_MAST
  (COMP_CODE     VARCHAR(8),
  UNIT_CODE      VARCHAR(8),
  PUBL_CODE      VARCHAR(3),
  EDTN_CODE      VARCHAR(3),
  MON_RATE       NUMERIC(12,4)                   NOT NULL,
  TUE_RATE       NUMERIC(12,4)                   NOT NULL,
  WED_RATE       NUMERIC(12,4)                   NOT NULL,
  THU_RATE       NUMERIC(12,4)                   NOT NULL,
  FRI_RATE       NUMERIC(12,4)                   NOT NULL,
  SAT_RATE       NUMERIC(12,4)                   NOT NULL,
  SUN_RATE       NUMERIC(12,4)                   NOT NULL,
  VALID_FROM     DATETIME,
  FREEZE_FLAG   VARCHAR(1)		DEFAULT 'N',
  CREATED_BY     VARCHAR(30),     
  CREATED_DT     DATETIME    DEFAULT GETDATE(),
  UPDATED_BY     VARCHAR(30),
  UPDATED_DT     DATETIME,
  CONSTRAINT CIR_LATE_FEE_MAST_PK PRIMARY KEY(COMP_CODE, UNIT_CODE, PUBL_CODE, EDTN_CODE, VALID_FROM));
  
CREATE TABLE LOGIN_ZONE_MAST
(COMP_CODE      VARCHAR(20),
USER_CODE       VARCHAR(10),
ZONE_CODE       VARCHAR(8),
USER_FLAG       VARCHAR(1)  DEFAULT 'N',
CONSTRAINT LOGIN_ZONE_MAST_PK PRIMARY KEY (COMP_CODE, ZONE_CODE, USER_CODE))

CREATE TABLE LOGIN_REGION_MAST
(COMP_CODE      VARCHAR(20),
USER_CODE       VARCHAR(10),
REGION_CODE     VARCHAR(8),
USER_FLAG       VARCHAR(1)  DEFAULT 'N',
CONSTRAINT LOGIN_REGION_MAST_PK PRIMARY KEY (COMP_CODE, REGION_CODE, USER_CODE))
/**************************17-nov-2011 Laxman **************/
ALTER TABLE CIR_UNSOLD_RETURN_CONTROL ADD ZONE_CODE VARCHAR(20)

ALTER TABLE CIR_UNSOLD_DTL ADD RETURN_PER NUMERIC(5), DAMAGE NUMERIC(8),APR_DAMAGE NUMERIC(8),
VAR_SHORT_RECPT NUMERIC(8), VAR_LATE_RECPT NUMERIC(8), VAR_BNR NUMERIC(8), VAR_UNSOLD NUMERIC(8),VAR_DAMAGE NUMERIC(8),
VAR_USERID  VARCHAR(10), VAR_DT DATETIME,SUP_AGCD   VARCHAR(8),SUP_DPCD   VARCHAR(8)

ALTER TABLE CIR_UNSOLD_DTL_DIS ADD RETURN_PER NUMERIC(5), DAMAGE NUMERIC(8),APR_DAMAGE NUMERIC(8),
VAR_SHORT_RECPT NUMERIC(8), VAR_LATE_RECPT NUMERIC(8), VAR_BNR NUMERIC(8), VAR_UNSOLD NUMERIC(8),VAR_DAMAGE NUMERIC(8),
VAR_USERID  VARCHAR(10), VAR_DT DATETIME,SUP_AGCD   VARCHAR(8),SUP_DPCD   VARCHAR(8)

ALTER TABLE CIR_UNSOLD_HDR ADD VAR_USERID  VARCHAR(10), VAR_DT DATETIME,SUP_AGCD   VARCHAR(8),SUP_DPCD   VARCHAR(8)
ALTER TABLE CIR_UNSOLD_HDR_DIS ADD VAR_USERID  VARCHAR(10), VAR_DT DATETIME,SUP_AGCD   VARCHAR(8),SUP_DPCD   VARCHAR(8)

CREATE INDEX IDX_TEMP_COL_INS ON TEMP_COL_INS(session_id)
/**********************19-nov-2011 Laxman*****************/
ALTER TABLE CIR_AGMAST_DIS ADD SUP_BRANCH_CODE  VARCHAR(8), SUP_STATE_CODE VARCHAR(8);
ALTER TABLE CIR_AGMAST ADD SUP_BRANCH_CODE  VARCHAR(8), SUP_STATE_CODE VARCHAR(8);
ALTER TABLE CIR_PUBL_MAST ADD PUBLISHER  VARCHAR(50)

/*********************24-nov-2011 Laxman****0005749*****************/
ALTER TABLE PREFERRENCES ADD CIR_AUTO_APPROVAL_UNSOLD  VARCHAR(1) DEFAULT 'N',CIR_AUTO_PHYSICAL_UNSOLD  VARCHAR(1) DEFAULT 'N'
ALTER TABLE CIR_UNSOLD_HDR ADD UPDATE_BY    VARCHAR(30),UPDATE_DT  DATETIME
ALTER TABLE CIR_UNSOLD_HDR_DIS ADD UPDATE_BY    VARCHAR(30),UPDATE_DT  DATETIME
ALTER TABLE CIR_UNSOLD_DTL ADD UPDATE_BY    VARCHAR(30),UPDATE_DT  DATETIME
ALTER TABLE CIR_UNSOLD_DTL_DIS ADD UPDATE_BY    VARCHAR(30),UPDATE_DT  DATETIME
ALTER TABLE PREFERRENCES ADD CIR_UNSOLD_INCLUDE_INCT VARCHAR(1)   DEFAULT 'N',
CIR_UNSOLD_INCLUDE_INSFEE  VARCHAR(1)   DEFAULT 'N',
CIR_UNSOLD_ON_RECEIVED_DT  VARCHAR(1)   DEFAULT 'S'

//**************************************5738*************

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[CIR_MACH_CONFIG_MAST](
	[MACH_ID] [numeric](5, 0) NOT NULL,
	[STD_BUNDLE] [numeric](3, 0) NULL,
	[MIN_BUNDLE] [numeric](3, 0) NULL,
	[MAX_BUNDLE] [numeric](3, 0) NULL,
	[LAYER_SIZE] [numeric](3, 0) NULL,
	[STRAPPING] [numeric](3, 0) NULL,
	[CREATED_BY] [varchar](30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	[CREATED_DT] [datetime] NULL DEFAULT (getdate()),
	[UPDATE_BY] [varchar](30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
	[UPDATED_DT] [datetime] NULL,
 CONSTRAINT [CIR_MACH_CONFIG_MAST_PK] PRIMARY KEY CLUSTERED 
(
	[MACH_ID] ASC
)WITH (PAD_INDEX  = OFF, IGNORE_DUP_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]

GO
SET ANSI_PADDING OFF

//*************************************************

/***************************29-nov-2011**********mimoh***************/
alter table preferrences add AGENCY_UNBLOCK_APPROVAL VARCHAR(1)

alter table preferrences add UNBLOCK_APPROVAL_OUTSIDE_LIMIT VARCHAR(1)

alter table CIR_SUSPEND_TRAN add AGENCY_UNBLOCK_APPROVAL VARCHAR(1)

alter table CIR_SUSPEND_TRAN add AGENCY_UNBLOCK_TYPE VARCHAR(50)
/***************************29-nov-2011**********mimoh***************/

/***************************01-dec-2011**********neha***************/
ALTER TABLE cir_agmast_DIS ADD ROC_NO VARCHAR(20)
ALTER TABLE cir_agmast ADD ROC_NO VARCHAR(20)

ALTER TABLE CIR_AGMAST ADD ACCOUNT_AGCD VARCHAR(8)

ALTER TABLE CIR_AGMAST ADD ACCOUNT_DPCD VARCHAR(8)

ALTER TABLE CIR_AGMAST_DIS ADD ACCOUNT_AGCD VARCHAR(8)

ALTER TABLE CIR_AGMAST_DIS ADD ACCOUNT_DPCD VARCHAR(8)

/***************************01-dec-2011**********neha***************/


